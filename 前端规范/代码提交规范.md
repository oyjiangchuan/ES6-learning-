### ä½¿ç”¨eslint + prettier + husky + commitlint + commitizen + lint-stagedæ­å»ºå‰ç«¯ä»£ç æäº¤è§„èŒƒ

1. ä»£ç æ£€æŸ¥å·¥å…· eslint
```
npm install eslint -D
npx eslint --init  # init å‘½ä»¤ä¼šæ ¹æ®é€‰é¡¹ç”Ÿæˆ .eslintrc.js
```
> å®‰è£…äº†æœ€æ–°ç‰ˆæœ¬çš„`eslint`ï¼Œæ‰§è¡Œ`npx eslint --init`æ—¶æŠ¥é”™ï¼šnodeç‰ˆæœ¬é—®é¢˜ï¼Œå‡çº§nodeç‰ˆæœ¬14+å³å¯ï¼Œæ¨èå‡çº§åˆ°nodeçš„ç¨³å®šç‰ˆæœ¬

2. ä»£ç é£æ ¼å·¥å…· prettier
```
npm i prettier eslint-config-prettier eslint-plugin-prettier -D
```
åœ¨.eslintrc.jsä¸­ extendä¸­æ·»åŠ "prettier"è§£å†³eslintå’Œprettierçš„å†²çª
> eslint-config-prettieræ–°ç‰ˆæœ¬æ›´æ–°ä¹‹å åªéœ€è¦å†™ä¸€ä¸ª"prettierr"å³å¯ æ— éœ€å¤šè¨€æŒ‡ä»¤
åˆ›å»º.prettierrc

```js
{
  "semi": false,
  "tabWidth": 2,
  "trailingComma": "none",
  "singleQuote": true,
  "arrowParens": "avoid"
}
```

3. gitè§„èŒƒ
- ç›¸å…³gitçš„hooks(é’©å­)
  1. æäº¤çš„ä»£ç è§„èŒƒ: pre-commit é€šè¿‡é’©å­å‡½æ•° åˆ¤æ–­æäº¤(commitä¹‹å‰)çš„ä»£ç æ˜¯å¦ç¬¦åˆè§„èŒƒ
  2. æäº¤çš„ä¿¡æ¯è§„èŒƒ: commit-msg é€šè¿‡é’©å­å‡½æ•° åˆ¤æ–­commitä¿¡æ¯æ˜¯å¦ç¬¦åˆè§„èŒƒ
  3. æäº¤çš„ä»£ç å½±å“: pre-push é€šè¿‡é’©å­ æ‰§è¡Œæµ‹è¯•(git pushä¹‹å‰)

- ç›¸å…³è§„èŒƒå·¥å…·
  1. husky: æ“ä½œgité’©å­çš„å·¥å…·
  2. lint-staged: æœ¬åœ°æš‚å­˜ä»£ç æ£€æŸ¥å·¥å…·
  3. commitlint: commitä¿¡æ¯æ ¡éªŒå·¥å…·
  4. commitizen: è¾…åŠ©commitä¿¡æ¯ é€šè¿‡é€‰æ‹©è¾“å…¥è§„èŒƒçš„æäº¤ä¿¡æ¯

- ç›¸å…³æµç¨‹
  1. å®‰è£…ä»£ç æ ¡éªŒä¾èµ–
  ```
  npm i lint-staged husky -D
  npm set-script prepare "husky install" # åœ¨package.jsonä¸­æ·»åŠ è„šæœ¬ "prepare": "husky install"
  npm run prepare # åˆå§‹åŒ–husky å°†git hooksé’©å­äº¤ç”± huskyæ‰§è¡Œ
  npx husky add .husky/pre-commit "npx lint-staged" # è¡¨ç¤ºpre-commitæ‰§è¡Œnpx lint-stagedæŒ‡ä»¤
  ```
  > prepareä¸ºnpmçš„é’©å­ åœ¨npm install ä¹‹å‰æ‰§è¡Œ
  æ ¹ç›®å½•åˆ›å»º.lintstagedrc.jsonæ–‡ä»¶æ§åˆ¶æ£€æŸ¥å’Œæ“ä½œæ–¹å¼
  ```json
  {
    "*.{js,jsx,ts,tsx}": ["prettier --write", "eslint  --fix"],
    "*.md": ["prettier --write"]
  }
  ```

  2. å®‰è£…æäº¤ä¿¡æ¯ä¾èµ–
  ```
  npm i commitlint @commitlint/config-conventional -D
  npx husky add .husky/commit-msg 'npx --no-install commitlint --edit "$1"' # è¡¨ç¤ºcommit-msgé’©å­æ‰§è¡Œ æ¶ˆæ¯æ ¡éªŒ
  ```

  3. å®‰è£…è¾…åŠ©æäº¤ä¾èµ–
  ```
  npm i commitizen -g # å…¨å±€å®‰è£… å…¨å±€å®‰è£…çš„å¯ä»¥åœ¨ä»»ä½•git initä¸‹çš„ç›®å½•æ‰§è¡Œgit czæˆ–czå‘½ä»¤ä»£æ›¿ git commit
  npm i commitizen -D # é¡¹ç›®å†…å®‰è£…ï¼Œåªèƒ½åœ¨å½“å‰é¡¹ç›®ç›®å½•ä¸‹npm run commitä»£æ›¿git commit package.json ä¸­æ·»åŠ  "commit": "git-cz"
  npm i cz-conventional-changelog -D
  npx commitizen init cz-conventional-changelog --save-dev --save-exact
  ```

  > 3å’Œ4å¯ä»¥é€‰æ‹©ï¼Œå¦‚æœæƒ³è‡ªå®šä¹‰è§„èŒƒï¼Œå³å¯ä¸ç”¨å®‰è£…3ä¸­çš„cz-conventional-changelogåŒ…ï¼Œå› ä¸ºä¼šä½¿ç”¨å¦å¤–çš„åŒ…
  4. è‡ªå®šä¹‰æäº¤è§„èŒƒ
  ```
  npm i -D commitlint-config-cz  cz-customizable
  ```
  - å¢åŠ  .cz-config.js
  ```js
  'use strict'
  module.exports = {
    types: [
      { value: ':sparkles: feat', name: 'âœ¨ ç‰¹æ€§ | ä¸€ä¸ªæ–°çš„ç‰¹æ€§' },
      { value: ':bug: fix', name: 'ğŸ› ä¿®å¤ | ä¿®å¤ä¸€ä¸ªBug' },
      { value: ':tada: init', name: 'ğŸ‰ Init | åˆå§‹åŒ–' },
      { value: ':memo: docs', name: 'ğŸ“ æ–‡æ¡£ | æ–‡æ¡£' },
      { value: ':lipstick: style', name: 'ğŸ’„ æ ·å¼ | æ ·å¼' },
      { value: ':recycle: refactor', name: 'â™»ï¸  é‡æ„ | ä»£ç é‡æ„' },
      { value: ':zap: perf', name: 'âš¡ï¸ æ€§èƒ½ | æ€§èƒ½ä¼˜åŒ–' },
      { value: ':white_check_mark: test', name: 'âœ… æµ‹è¯• | æ·»åŠ æµ‹è¯•' },
      { value: ':rocket: chore', name: 'ğŸš€ å·¥å…· | æ„å»º/å·¥ç¨‹ä¾èµ–/å·¥å…·' },
      { value: ':rewind: revert', name: 'âª å›æ»š | ä»£ç å›é€€' },
      { value: ':package: build', name: 'ğŸ“¦â€ æ‰“åŒ… | æ‰“åŒ…æ„å»º' },
      { value: ':construction_worker: ci', name: 'ğŸ‘· CI | CI é…ç½®' }
    ],
    messages: {
      type: 'è¯·é€‰æ‹©æäº¤ç±»å‹(å¿…å¡«)',
      customScope: 'è¯·è¾“å…¥æ–‡ä»¶ä¿®æ”¹èŒƒå›´(å¯é€‰)',
      subject: 'è¯·ç®€è¦æè¿°æäº¤(å¿…å¡«)',
      body: 'è¯·è¾“å…¥è¯¦ç»†æè¿°(å¯é€‰)',
      breaking: 'åˆ—å‡ºä»»ä½•BREAKING CHANGES(å¯é€‰)',
      footer: 'è¯·è¾“å…¥è¦å…³é—­çš„issue ä¾‹å¦‚ï¼š#31, #34(å¯é€‰)',
      confirmCommit: 'ç¡®å®šæäº¤æ­¤è¯´æ˜å—ï¼Ÿ'
    },
    allowCustomScopes: true,
    allowBreakingChanges: ['feat', 'fix'], // å½“æäº¤ç±»å‹ä¸ºfeatã€fixæ—¶æ‰æœ‰ç ´åæ€§ä¿®æ”¹é€‰é¡¹
    subjectLimit: 100
  }
  ```
  
  - package.jsonä¸­ å°†åŸæ¥commité…ç½® å˜æ›´ä¸ºè‡ªå®šä¹‰é…ç½®
  ```json
  "config": {
    "commitizen": {
      "path": "node_modules/cz-customizable"
    }
  }
  ```
  
  - ä¿®æ”¹commitlint.config.jsæ–‡ä»¶
  ```js
  module.exports = {
    extends: ['cz'], // é‡‡ç”¨ cz è‡ªå®šä¹‰çš„æäº¤è§„èŒƒ  > .cz-config.js
    rules: {
      // è‡ªå®šä¹‰è§„åˆ™
    }
  }
  ```

  ### å‚è€ƒæ–‡ç« 
  - [å‰ç«¯å·¥ç¨‹ä»£ç è§„èŒƒ](https://juejin.cn/post/7038143752036155428)
  - [commitè§„èŒƒ+commitlint+CHANGELOGè‡ªåŠ¨ç”Ÿæˆä¸€æ¡é¾™æœåŠ¡](https://juejin.cn/post/6934292467160514567#heading-15)

  ### å®è·µé¡¹ç›®åœ°å€
  - [workflow-demo](https://github.com/oyjiangchuan/workflow-demo)