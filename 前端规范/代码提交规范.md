### 使用eslint + prettier + husky + commitlint + commitizen + lint-staged搭建前端代码提交规范

1. 代码检查工具 eslint
```
npm install eslint -D
npx eslint --init  # init 命令会根据选项生成 .eslintrc.js
```
> 安装了最新版本的`eslint`，执行`npx eslint --init`时报错：node版本问题，升级node版本14+即可，推荐升级到node的稳定版本

2. 代码风格工具 prettier
```
npm i prettier eslint-config-prettier eslint-plugin-prettier -D
```
在.eslintrc.js中 extend中添加"prettier"解决eslint和prettier的冲突
> eslint-config-prettier新版本更新之后 只需要写一个"prettierr"即可 无需多言指令
创建.prettierrc

```js
{
  "semi": false,
  "tabWidth": 2,
  "trailingComma": "none",
  "singleQuote": true,
  "arrowParens": "avoid"
}
```

3. git规范
- 相关git的hooks(钩子)
  1. 提交的代码规范: pre-commit 通过钩子函数 判断提交(commit之前)的代码是否符合规范
  2. 提交的信息规范: commit-msg 通过钩子函数 判断commit信息是否符合规范
  3. 提交的代码影响: pre-push 通过钩子 执行测试(git push之前)

- 相关规范工具
  1. husky: 操作git钩子的工具
  2. lint-staged: 本地暂存代码检查工具
  3. commitlint: commit信息校验工具
  4. commitizen: 辅助commit信息 通过选择输入规范的提交信息

- 相关流程
  1. 安装代码校验依赖
  ```
  npm i lint-staged husky -D
  npm set-script prepare "husky install" # 在package.json中添加脚本 "prepare": "husky install"
  npm run prepare # 初始化husky 将git hooks钩子交由 husky执行
  npx husky add .husky/pre-commit "npx lint-staged" # 表示pre-commit执行npx lint-staged指令
  ```
  > prepare为npm的钩子 在npm install 之前执行
  根目录创建.lintstagedrc.json文件控制检查和操作方式
  ```json
  {
    "*.{js,jsx,ts,tsx}": ["prettier --write", "eslint  --fix"],
    "*.md": ["prettier --write"]
  }
  ```

  2. 安装提交信息依赖
  ```
  npm i commitlint @commitlint/config-conventional -D
  npx husky add .husky/commit-msg 'npx --no-install commitlint --edit "$1"' # 表示commit-msg钩子执行 消息校验
  ```

  3. 安装辅助提交依赖
  ```
  npm i commitizen -g # 全局安装 全局安装的可以在任何git init下的目录执行git cz或cz命令代替 git commit
  npm i commitizen -D 
  npm i cz-conventional-changelog -D
  npm set-script commit "git-cz" # package.json 中添加 "commit": "git-cz"
  npx commitizen init cz-conventional-changelog --save-dev --save-exact
  ```